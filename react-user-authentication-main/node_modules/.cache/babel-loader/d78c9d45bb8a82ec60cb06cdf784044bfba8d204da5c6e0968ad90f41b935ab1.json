{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Amanpreet\\\\github\\\\main\\\\react-user-authentication-main\\\\src\\\\components\\\\Callback.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport authConfig from '../authConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Callback = _ref => {\n  _s();\n  let {\n    auth,\n    setAuth,\n    userManager,\n    userInfo,\n    setUserInfo,\n    handleLogout\n  } = _ref;\n  useEffect(() => {\n    if (auth === null) {\n      userManager.signinRedirectCallback().then(user => {\n        if (user) {\n          setAuth(true);\n          const access_token = user.access_token;\n          // Make a request to the user info endpoint using the access token\n          fetch(authConfig.userinfo_endpoint, {\n            headers: {\n              'Authorization': `Bearer ${access_token}`\n            }\n          }).then(response => response.json()).then(userInfo => {\n            setUserInfo(userInfo);\n          });\n        } else {\n          setAuth(false);\n        }\n      }).catch(error => {\n        setAuth(false);\n      });\n    }\n  }, [auth, userManager, setAuth]);\n  if (auth === true && userInfo) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Welcome, \", userInfo.name, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Your ZITADEL Profile Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Name:  \", userInfo.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Email: \", userInfo.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Email Verified: \", userInfo.email_verified ? \"Yes\" : \"No\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Locale: \", userInfo.locale]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Log out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 14\n    }, this);\n  }\n};\n_s(Callback, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = Callback;\nexport default Callback;\nvar _c;\n$RefreshReg$(_c, \"Callback\");","map":{"version":3,"names":["React","useEffect","authConfig","Callback","auth","setAuth","userManager","userInfo","setUserInfo","handleLogout","signinRedirectCallback","then","user","access_token","fetch","userinfo_endpoint","headers","response","json","catch","error","name","email","email_verified","locale"],"sources":["C:/Users/Amanpreet/github/main/react-user-authentication-main/src/components/Callback.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport authConfig from '../authConfig';\r\n\r\nconst Callback = ({ auth, setAuth, userManager, userInfo, setUserInfo, handleLogout }) => {\r\n\r\n  useEffect(() => {\r\n    if (auth === null) {\r\n      userManager.signinRedirectCallback().then((user) => {\r\n        if (user) {\r\n          setAuth(true);\r\n          const access_token = user.access_token;\r\n          // Make a request to the user info endpoint using the access token\r\n          fetch(authConfig.userinfo_endpoint, {\r\n            headers: {\r\n              'Authorization': `Bearer ${access_token}`\r\n            }\r\n          })\r\n            .then(response => response.json())\r\n            .then(userInfo => {\r\n              setUserInfo(userInfo);\r\n            });\r\n        } else {\r\n          setAuth(false);\r\n        }\r\n      }).catch((error) => {\r\n        setAuth(false);\r\n      });\r\n    }\r\n  }, [auth, userManager, setAuth]);\r\n\r\n\r\n  if (auth === true && userInfo) {\r\n    return (\r\n      <div>\r\n        <h1>Welcome, {userInfo.name}!</h1>\r\n        <h2>Your ZITADEL Profile Information</h2>\r\n        <h3>Name:  {userInfo.name}</h3>\r\n        <h3>Email: {userInfo.email}</h3>\r\n        <h3>Email Verified: {userInfo.email_verified? \"Yes\": \"No\"}</h3>\r\n        <h3>Locale: {userInfo.locale}</h3>\r\n\r\n        <button onClick={handleLogout}>Log out</button>\r\n      </div>\r\n    );\r\n  }\r\n  else {\r\n      return <div>Loading...</div>;\r\n    }\r\n\r\n};\r\n\r\nexport default Callback;\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,UAAU,MAAM,eAAe;AAAC;AAEvC,MAAMC,QAAQ,GAAG,QAAyE;EAAA;EAAA,IAAxE;IAAEC,IAAI;IAAEC,OAAO;IAAEC,WAAW;IAAEC,QAAQ;IAAEC,WAAW;IAAEC;EAAa,CAAC;EAEnFR,SAAS,CAAC,MAAM;IACd,IAAIG,IAAI,KAAK,IAAI,EAAE;MACjBE,WAAW,CAACI,sBAAsB,EAAE,CAACC,IAAI,CAAEC,IAAI,IAAK;QAClD,IAAIA,IAAI,EAAE;UACRP,OAAO,CAAC,IAAI,CAAC;UACb,MAAMQ,YAAY,GAAGD,IAAI,CAACC,YAAY;UACtC;UACAC,KAAK,CAACZ,UAAU,CAACa,iBAAiB,EAAE;YAClCC,OAAO,EAAE;cACP,eAAe,EAAG,UAASH,YAAa;YAC1C;UACF,CAAC,CAAC,CACCF,IAAI,CAACM,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCP,IAAI,CAACJ,QAAQ,IAAI;YAChBC,WAAW,CAACD,QAAQ,CAAC;UACvB,CAAC,CAAC;QACN,CAAC,MAAM;UACLF,OAAO,CAAC,KAAK,CAAC;QAChB;MACF,CAAC,CAAC,CAACc,KAAK,CAAEC,KAAK,IAAK;QAClBf,OAAO,CAAC,KAAK,CAAC;MAChB,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACD,IAAI,EAAEE,WAAW,EAAED,OAAO,CAAC,CAAC;EAGhC,IAAID,IAAI,KAAK,IAAI,IAAIG,QAAQ,EAAE;IAC7B,oBACE;MAAA,wBACE;QAAA,WAAI,WAAS,EAACA,QAAQ,CAACc,IAAI,EAAC,GAAC;MAAA;QAAA;QAAA;QAAA;MAAA,QAAK,eAClC;QAAA,UAAI;MAAgC;QAAA;QAAA;QAAA;MAAA,QAAK,eACzC;QAAA,WAAI,SAAO,EAACd,QAAQ,CAACc,IAAI;MAAA;QAAA;QAAA;QAAA;MAAA,QAAM,eAC/B;QAAA,WAAI,SAAO,EAACd,QAAQ,CAACe,KAAK;MAAA;QAAA;QAAA;QAAA;MAAA,QAAM,eAChC;QAAA,WAAI,kBAAgB,EAACf,QAAQ,CAACgB,cAAc,GAAE,KAAK,GAAE,IAAI;MAAA;QAAA;QAAA;QAAA;MAAA,QAAM,eAC/D;QAAA,WAAI,UAAQ,EAAChB,QAAQ,CAACiB,MAAM;MAAA;QAAA;QAAA;QAAA;MAAA,QAAM,eAElC;QAAQ,OAAO,EAAEf,YAAa;QAAA,UAAC;MAAO;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QAC3C;EAEV,CAAC,MACI;IACD,oBAAO;MAAA,UAAK;IAAU;MAAA;MAAA;MAAA;IAAA,QAAM;EAC9B;AAEJ,CAAC;AAAC,GA9CIN,QAAQ;AAAA,KAARA,QAAQ;AAgDd,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}